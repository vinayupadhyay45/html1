<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        body {
              text-align: center;
        }
    </style>
    <title>cricket game</title>
</head>
<body>
    <h1>Bat Ball Stump Game</h1>
    <button onclick="
    let computerChoice =genrateComputerchoice();
    let resultMassage= getResult('Bat' , computerChoice);
    showResult('Bat',computerChoice, resultMassage);
    ">Bat</button>
    <button onclick="
    computerChoice= genrateComputerchoice();
    resultMassage = getResult('Ball',computerChoice);
    showResult('Ball',computerChoice, resultMassage);
    ">Ball</button>
    <button onclick="
    computerChoice=genrateComputerchoice();
    resultMassage=getResult('Stump',computerChoice);
    showResult('Stump',computerChoice, resultMassage);
    ">Stump</button>
    <button onclick="localStorage.clear()
    resetScore();
    
    "> Reset</button>
    <script>
        let scoreStr = localStorage.getItem('score');
        let score;
        resetScore(scoreStr);

        function resetScore(scoreStr){

        
         score = scoreStr ?  JSON.parse(scoreStr) : {
            Win :0,
        Lost:0,
        Tie:0,
        };
    
    //     if(scoreStr!== undefined){
    //         score = JSON.parse(scoreStr);
    //     } else {
    //    score = {
    //     Win :0,
    //     Lost:0,
    //     Tie:0,
       
    //   };
    // }
      score.displayScore =function(){
            
            return `Won:${score.Win} , Lost:${score.Lost} , Tie:${score.Tie}`
            };
        }
        function genrateComputerchoice()
        {
            let randomNumber= Math.random()*3;
    
    if(randomNumber > 0 && randomNumber <= 1){ 
       return'Bat';
       //console.log('computer choice is bat');
    }else if( randomNumber>1 && randomNumber<=2) {
       return 'Ball';
       //console.log(computer choice is ball);
    } else{
        return 'Stump';
         //console.log(.computer choice is stump');
    }
        }
    function getResult(userMove , computerMoves){
        if(userMove==='Bat'){
            if(computerMoves==='Ball'){
                score.Win ++ ;
       return 'user won';
    }
    else if(computerMoves==='Bat'){
        score.Tie ++ ; 
       return 'match is tie';
    }
    else if(computerMoves==='Stump'){
        score.Lost ++;
       return 'computer has won';
    }
} else if(userMove==='Ball'){
    if(computerMoves==='Ball'){
        score.Tie ++ ; 
       return 'match is tie';
    }
    else if(computerMoves ==='Bat'){
        score.Lost ++;
       return 'computer has won';
    }
    else if(computerMoves ==='Stump'){
        score.Win ++ ;
       return 'user won';
    }

} else {
    if(computerMoves==='Ball'){
        score.Lost ++;
        return 'computer has won';
    }
    else if(computerMoves==='Bat'){
        score.Win ++ ;
       return 'user won';
    }
    else if(computerMoves==='Stump'){
        score.Tie ++ ; 
       return 'match is tie';
    }
}

    }
    function showResult(userMove , computerMoves, result)
    {
        localStorage.setItem('score' , JSON.stringify(score))
        console.log(score);
        alert(`You have choosen ${userMove}. Computer choice is ${computerMoves} 
        
        ${result}
       ${score.displayScore()} `);
    }
        
    </script>
</body>
</html>